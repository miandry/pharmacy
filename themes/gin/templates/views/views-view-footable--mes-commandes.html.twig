{#
/**
 * @file
 * Default theme implementation for displaying a view as a table.
 *
 * Available variables:
 * - attributes: Remaining HTML attributes for the element.
 *   - class: HTML classes that can be used to style contextually through CSS.
 * - title : The title of this group of rows.
 * - header: The table header columns.
 *   - attributes: Remaining HTML attributes for the element.
 *   - content: HTML classes to apply to each header cell, indexed by
 *   the header's key.
 *   - default_classes: A flag indicating whether default classes should be
 *     used.
 * - caption_needed: Is the caption tag needed.
 * - caption: The caption for this table.
 * - accessibility_description: Extended description for the table details.
 * - accessibility_summary: Summary for the table details.
 * - rows: Table row items. Rows are keyed by row number.
 *   - attributes: HTML classes to apply to each row.
 *   - columns: Row column items. Columns are keyed by column number.
 *     - attributes: HTML classes to apply to each column.
 *     - content: The column content.
 *   - default_classes: A flag indicating whether default classes should be
 *     used.
 * - responsive: A flag indicating whether table is responsive.
 * - sticky: A flag indicating whether table header is sticky.
 *
 * @see template_preprocess_views_view_table()
 *
 * @ingroup themeable
 */
#}
{%
set classes = [
'cols-' ~ header|length,
responsive ? 'responsive-enabled',
sticky ? 'sticky-enabled',
"table table-striped",
'footable footable-1 breakpoint breakpoint-lg'
]
%}

{{ attach_library('myadmin/bootstrap_css') }}


<style>
  .footable-details th{
    display:none!important;
  }
  .table-striped>tbody>tr:nth-of-type(odd)>* {
    --bs-table-bg-type: #fff;
  }
  .details-commande{
    background-color: #e0f2fd !important;
    padding: 15px;
  }
  .commande-header{
     padding-bottom: 10px;
     margin:0px;
  }
  .commande-body{
    border-top: 1px dashed;
    padding: 10px;
  }
  .commande-th{
       padding-left: 10px;
  }
  .badge-paid {
    background: #28a745;
  }
  .badge-cancel {
    background: #6c6c6c;
  }
  .badge {
    display: inline-block;
    font-weight: 700;
    border-radius: 0.375rem;
    text-align: center;
    padding: 0.35em 0.65em;
    white-space: nowrap;
    color: #fff;
    text-align: center;
}
.badge-unpaid {
    background: #d2322d;
}
</style>

{{ attach_library('myadmin/commande_js') }}
		<table id="table1" data-search="true"  data-search-align="left" data-pagination="true">
						<thead>
							<tr>
								<th data-field="id">ID</th>
								<th data-field="name">name</th>
								<th data-field="price">Prix unitaire</th>
							</tr>
						</thead>
	  </table>

<table{{ attributes.addClass(classes) }}>
  {% if caption_needed %}
    <caption>
    {% if caption %}
      {{ caption }}
    {% else %}
      {{ title }}
    {% endif %}
    {% if (summary is not empty) or (description is not empty) %}
      <details>
        {% if summary is not empty %}
          <summary>{{ summary }}</summary>
        {% endif %}
        {% if description is not empty %}
          {{ description }}
        {% endif %}
      </details>
    {% endif %}
    </caption>
  {% endif %}
  {% if header %}
    <thead>
      <tr>
        {% for key, column in header %}
          {% if column.default_classes %}
            {%
              set column_classes = [
                'views-field',
                'views-field-' ~ fields[key],
              ]
            %}
          {% endif %}
          <th{{ column.attributes.addClass(column_classes).setAttribute('scope', 'col') }}>
            {%- if column.wrapper_element -%}
              <{{ column.wrapper_element }}>
                {%- if column.url -%}
                  <a href="{{ column.url }}" title="{{ column.title }}">{{ column.content }}{{ column.sort_indicator }}</a>
                {%- else -%}
                  {{ column.content }}{{ column.sort_indicator }}
                {%- endif -%}
              </{{ column.wrapper_element }}>
            {%- else -%}
              {%- if column.url -%}
                <a href="{{ column.url }}" title="{{ column.title }}">{{ column.content }}{{ column.sort_indicator }}</a>
              {%- else -%}
                {{- column.content }}{{ column.sort_indicator }}
              {%- endif -%}
            {%- endif -%}
          </th>
        {% endfor %}
      </tr>
    </thead>
  {% endif %}
  <tbody>

    {% for row in rows %}
      <tr{{ row.attributes }}>
        {% for key, column in row.columns %}
          {% if column.default_classes %}
            {%
              set column_classes = [
                'views-field'
              ]
            %}
            {% for field in column.fields %}
              {% set column_classes = column_classes|merge(['views-field-' ~ field]) %}
            {% endfor %}
          {% endif %}
          <td{{ column.attributes.addClass(column_classes) }}>
            {%- if column.wrapper_element -%}
              <{{ column.wrapper_element }}>
              {% for content in column.content %}
                {{ content.separator }}{{ content.field_output }}
              {% endfor %}
              </{{ column.wrapper_element }}>
            {%- else -%}
              {% for content in column.content %}
                {{- content.separator }}{{ content.field_output -}}
              {% endfor %}
            {%- endif %}
          </td>
        {% endfor %}
      </tr>
    {% endfor %}
  </tbody>
</table>
<script>
   	  var data = 
							[
				            {% for item in rows %}
                   {% set nid = item.columns.nid %}
													{% set n = node_parser(nid) %}
                      

				                           	{
				                                "id": "{{n.nid}}",
				                                "name": "{{n.title}} <br/> <span class=dci>{{n.field_dci.title}}</span>",
											    "unite": "{{n.field_stock_unitaire.title}}",
				                                "price": "{{n.field_prix_unitaire}}",
				                                "qte": "{{n.field_quantite_stock}}"
				                            },
				             {% endfor %}
							]
    ]

</script>
