	{% set params = get_parameter() %}
	{% set montant_argent_input = params.montant_argent_input %}
	{% set n = (node_parser(params.id)) %}
	{% set client = node_parser(n.field_client.nid) %}

<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>ticket-{{n.title}}</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
	

		<style>
			@page {
				size: A5;
				margin: 0;
			}
			body {
				font-family: Arial, sans-serif;
				margin: 0;
				padding: 0;
			}
			.body-invoice {
				background: #e7e9ed;
				color: #535b61;
			    font-size: 14px;
                line-height: 20px;
			}

			.receipt {
				width: 100%;
				height: 100%;
				padding: 20px;
				box-sizing: border-box;
				text-align: center;
			}
			.header,
			.footer {
				margin-bottom: 20px;
			}
			.header h1 {
				margin: 0;
				font-size: 24px;
			}
			.header p {
				margin: 5px 0;
			}
			.items {
				width: 100%;
				margin-bottom: 20px;
				text-align: left;
			}
			.items p {
				margin: 5px 0;
				font-size:16px;
			}
			.items .item {
				display: flex;
				justify-content: space-evenly;
			}
			.total {
				margin-top: 20px;
				font-size:24px;
				margin-bottom:15px;
			}
			.total p {
				margin: 5px 0;
			}
			.invoice-container {
				margin: 15px auto;
				padding: 0px;
				width: 148mm;
				background-color: #fff;
				border: 1px solid #ccc;
				-moz-border-radius: 6px;
				-webkit-border-radius: 6px;
				-o-border-radius: 6px;
				border-radius: 6px;
			}

			@media(max-width: 767px) {
				.invoice-container {
					padding: 35px 20px 70px;
					margin-top: 0;
					border: none;
					border-radius: 0;
				}
			}
			.prix{
			    margin-top: 15px;
                font-size: 15px;
			}
		</style>
	</head>

	<!-- Set "A5", "A4" or "A3" for class name -->
	<!-- Set also "landscape" if you need -->


	<body cz-shortcut-listen="true" class="body-invoice">
		<!-- Each sheet element should have the class "sheet" -->
		<!-- "padding-**mm" is optional: you can set 10, 15, 20 or 25 -->
			<section
			class="invoice-container"> <!-- Write HTML just like a web page -->
			<article>
				<div class="receipt">
					<div class="header">
						<h1><b>PHARMACIE RABE</b></h1>
						<p>Cité ITAOSY</p>
                        <p>REFERENCE : {{n.title}}</p>	
					</div>
      
					<div class="items">
         {% set total = 0 %}
         {% set remise  = 0 %}
         {% for article in n.field_articles %}
          {% set a = node_parser(article.field_article.nid) %}
          {% set montant = a.field_prix_unitaire * article.field_quantite %}
                    	<div class="item">
							<p>{{ article.field_quantite }}</p>
							<p>{{ a.title }}</p>
							<p>{{ price(montant) }} </p>
						</div>
                           {% set total = total +  montant %}
         {% endfor %}
					
					</div>
         {% if n.field_remise %}
         			<div class="total">
						<p>
							<strong> Total ( - {{n.field_remise|number_format}}% ) :
							{{ price((total)*(1-(n.field_remise)/100)) }} Ar </strong>
                        </p>
					</div>
						<div class="prix">
							Espèces : {{price(montant_argent_input)}} Ar 
                        </div>
						<div class="prix">
							Change : {{price((total)*(1-(n.field_remise)/100) -  montant_argent_input)}} Ar 
                        </div>
         {% else %}
					<div class="total">
						<p>
							<strong>Total : 
							{{price(total)}} Ar </strong>
                        </p>
						<div class="prix">
							Espèces : {{price(montant_argent_input)}} Ar 
                        </div>
						<div class="prix">
							Change : {{price(total -  montant_argent_input)}} Ar 
                        </div>
					</div>
          {% endif %}          

					<div class="footer">
						<p>{{n.field_date}}</p>
						<p>MISAOTRA TOMPOKO</p>
					</div>
					<div
						class="footer">
						<!-- Footer -->
						<footer class="text-center mt-4">
							<div class="btn-group btn-group-sm d-print-none">
								<a href="javascript:window.print()" class="btn btn-light border text-black-50 shadow-none">
									<i class="fa fa-print"></i>
									Download
								</a>
							</div>
						</footer>
					</div>
				</div>


			</article>

		</section>


	</body>

</html>
